{% extends "commenter/base.html" %}
{% block title %} {{ product.name }} {% endblock %}
{% block body %}


{% for comments in product %}
<div class="container">
    <div class="row">
        <div class="comment-container" style=" margin:20px; padding:20px;">

            <div style="background:#e0e0c0; padding:10px">

                <img src="{{ comments.photo.url }}" style="width:50%; float:left; margin:10px"/>
                <h3 class="pull-right">{{ comments.product }} - {{ comments.title }}</h3>
                <p>{{ comments.message }}</p>

            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <b> <p style="color:#660000 ">Bu yorumu faydalÄ± buluyor musunuz?</p> </b>
        <span id="like_{{ comments.id }}">{{comments.like}}</span>
        <a onclick="like(true, {{ comments.id }})">
           <i class="fa fa-thumbs-o-up fa-2x " style="color: #660000" aria-hidden="true"></i>



        </a>&nbsp;&nbsp;
        <span id="dislike_{{ comments.id }}">{{comments.dislike}}</span>
        <a onclick="dislike(true, {{ comments.id }})">
           <i class="fa fa-thumbs-o-down fa-2x" style="color: #660000" aria-hidden="true"></i>



        </a>
    </div>
</div>

{% endfor %}



<script>
    function like(param, id) {
        $.post({
            data: {
                "like": param,
                "id": id,
                "csrfmiddlewaretoken": getCookie('csrftoken')
            },
            url: "{% url "like_dislike" %}",
            success: function (data) {
                $("#like_"+data.id).text(data.like)
            }
        })
    }

    function dislike(param, id) {
        $.post({
            data: {
                "dislike": param,
                "id": id,
                "csrfmiddlewaretoken": getCookie('csrftoken')
            },
            url: "{% url "dislike" %}",
            success: function (data) {
                $("#dislike_"+data.id).text(data.dislike)
            }
        })
    }
</script>
{% endblock %}
